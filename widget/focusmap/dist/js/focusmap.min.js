!function(i,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():i.Focusmap=t()}(this,function(){"use strict";function i(i,t,s,e){var n,o;if("function"==typeof i)return t||(t=1e3),s||(s=0),n=(new Date).getTime(),o=function(){var e,a;e=(new Date).getTime()-n,a=t-e%t,this.pass=Math.floor(e/t)+1,this.surplus=s-this.pass,setTimeout(function(){if(!this._stop)return!1===i.call(this,this.pass,this.surplus)?void this.stop():s&&!this.surplus?void this.stop():void o()}.bind(this),a)}.bind(this),this.stop=function(){this._stop=!0},this.pass=0,this.surplus=s-this.pass,e&&i.call(this,this.pass,this.surplus),o(0),this}function t(i,t){"string"==typeof i&&"object"==typeof t&&(this.ele=$(i),this.init(t))}return t.prototype={version:"0.1.0",init:function(i){this.options={},this.options.time=3e3,this.options.transitionTime=1e3,this.options.Animate=null,$.extend(this.options,i),this.render()},render:function(){this.createStyles(),this.createTemplate(),this.event()},createStyles:function(){var i="<style>html,body{margin:0;}ul{padding:0;margin:0;list-style:none;}li{list-style-type:none;}img{border:none;vertical-align:middle;}.focusmap-ul{height:100%;position:relative;}.focusmap-ul>li{position:absolute;top:0;left:0;z-index:1;height:100%;width:100%;background-size:cover;background-position:50% 50%;opacity:0;}.focusmap-ul>li>a{display:block;height:100%;}.focusmap-point{position:absolute;bottom:20px;left:0;z-index:3;width:100%;text-align:center;}.focusmap-point>a{display:inline-block;width:15px;height:15px;margin-right:7px;border-radius:50%;background:#68625C;font-size:0;}.focusmap-point>a:last-child{margin-right:0;}.focusmap-point>a.active{background:#F07A16;}</style>";$("body").append(i)},createTemplate:function(){var i,t,s,e=this.options,n=e.data,o=0,a="",l="";Array.isArray(n)||(n=[]);for(var p=n.length;o<p;o++)i=n[o],t=i.src||"",s=i.href||"",a+='<li style="background-image:url('+t+");"+(0===o?"opacity:1;z-index:2;":"")+'">'+(s?'<a href="'+s+'"></a>':"")+"</li>",l+='<a href="javascript:void(0);"'+(0===o?'class="active"':"")+">"+o+"</a>";a='<ul class="focusmap-ul">'+a+"</ul>",l='<div class="focusmap-point">'+l+"</div>",this.ele.css("position","relative").html(a+l)},toggleImg:function(i){var t=this.options,s=this.ele,e=t.transitionTime,n=s.find(".focusmap-ul li"),o=s.find(".focusmap-point a");o.eq(i).addClass("active").siblings().removeClass("active"),n.eq(i).animate({opacity:1,"z-index":2},e).siblings().animate({opacity:0,"z-index":1},e)},event:function(){var t=this.options,s=0,e=t.time,n=this,o=t.data.length-1,a=this.ele,l=a.find(".focusmap-ul li"),p=a.find(".focusmap-point a");a.hover(function(){t.Animate.stop()},function(){t.Animate=new i(function(){l.is(":animated")||(s===o?s=0:s++,n.toggleImg(s))},e)}).trigger("mouseleave"),p.on("click",function(){l.is(":animated")||(s=$(this).index(),n.toggleImg(s))})},destroy:function(){this.options.Animate=null,clearInterval(this.options.Animate),this.ele.remove()}},t});